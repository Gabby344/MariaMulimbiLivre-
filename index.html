<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Joyeux Anniversaire Ruth Mulimbi — Le Cadeau des Mots</title>

    <meta property="og:title" content="Livre d'Or Virtuel pour Ruth Mulimbi 💖" />
    <meta property="og:description" content="Laissez un message d'amour et de bénédictions pour Ruth à l'occasion de son anniversaire !" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://gabby344.github.io/" />
    <meta property="og:image" content="photo1.JPG" /> 

    <script src="https://cdn.tailwindcss.com"></script>

    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Merriweather:wght@300;400;700&family=Sacramento&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore-compat.js"></script>

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.js"></script>

    <script>
        // Configuration Tailwind harmonisée
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'primary-wine': '#8a0c4f',      /* Bordeaux Profond */
                        'secondary-pink': '#e990b0',    /* Rose doux */
                        'bg-paper': '#fffcf8',          /* Fond clair */
                    },
                    fontFamily: {
                        'serif': ['Merriweather', 'serif'],
                        'display': ['Playfair Display', 'serif'],
                        'sacramento': ['Sacramento', 'cursive'],
                    }
                }
            }
        }
    </script>

    <style>
        /* Variables CSS */
        :root {
            --rose-fonce: #8a0c4f;
            --rose-doux: #e990b0;
            --fond: #fffcf8;
            --fond-secondaire: #fef0f4;
            --texte: #3c3c3c;
        }

        body {
            font-family: theme('fontFamily.serif');
            background: linear-gradient(135deg, var(--fond), var(--fond-secondaire));
            color: var(--texte);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            text-align: center;
        }

        main {
            max-width: 1000px;
            margin: 0 auto;
            padding: 0 20px;
            flex-grow: 1;
        }

        /* --- HERO SECTION & CAROUSEL (Élégance & Transparence) --- */
        .hero {
            position: relative;
            max-height: 550px; 
            width: 100%;
            border-radius: 15px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4); 
            margin-top: 30px;
            overflow: hidden;
            border: 5px solid white; 
        }
        
        .carousel { display: flex; width: 900%; max-height: 550px; }
        .carousel-item { width: calc(100% / 9); flex-shrink: 0; }
        .hero-img { width: 100%; height: 550px; object-fit: cover; filter: brightness(70%); transition: filter 0.5s ease; }
        
        .hero-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            color: #fff;
            text-align: center;
            font-family: theme('fontFamily.display');
            background: rgba(138, 12, 79, 0.2); 
            padding: 30px 60px; 
            border-radius: 20px;
            backdrop-filter: blur(10px); 
            z-index: 10;
            border: 2px solid rgba(255, 255, 255, 0.6); 
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 1); 
            box-shadow: 0 0 40px rgba(0,0,0,0.6); 
        }
        
        .hero-text h1 { font-size: 60px; margin-bottom: 5px; color: #fff; font-weight: 700; letter-spacing: 4px; text-transform: uppercase; }
        .hero-text p { 
            font-size: 32px; 
            font-family: theme('fontFamily.sacramento'); 
            color: #ffeff4; 
            line-height: 1.3;
        }

        @media (max-width: 600px) {
            .hero-text { padding: 15px 10px; width: 90%; }
            .hero-text h1 { font-size: 30px !important; margin-bottom: 5px; }
            .hero-text p { font-size: 20px !important; }
            .hero-img { height: 400px; }
        }

        /* --- TITRE PRINCIPAL (AMÉLIORÉ) --- */
        h1:not(.hero-text h1) {
            color: var(--rose-fonce);
            font-family: theme('fontFamily.display');
            letter-spacing: 3px;
            text-shadow: 2px 3px 5px rgba(0,0,0,0.1); 
            font-weight: 700;
        }
        
        /* --- FORMULAIRE DESIGN PROFESSIONNEL --- */
        form { margin: 60px auto; max-width: 650px; background: #ffffff; padding: 45px; border-radius: 25px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); text-align: left; border-top: 6px solid var(--rose-fonce); transition: all 0.4s ease; }
        form:hover { transform: translateY(-3px); box-shadow: 0 15px 45px rgba(0, 0, 0, 0.15); }

        label { 
            font-weight: 700; 
            color: var(--rose-fonce); 
            display: block; 
            margin-bottom: 8px; 
            letter-spacing: 1px;
            font-size: 1.1em;
            font-family: theme('fontFamily.display');
        }

        input, textarea { 
            width: 100%; 
            padding: 16px; 
            margin: 0 0 30px 0; 
            border-radius: 12px; 
            border: 1px solid #ccc; 
            font-size: 1.1em; 
            background-color: #f9f9f9;
            transition: border-color 0.3s, box-shadow 0.3s, background-color 0.3s; 
            resize: vertical; 
        }
        input:focus, textarea:focus { 
            outline: none; 
            border-color: var(--rose-fonce); 
            box-shadow: 0 0 0 4px rgba(138, 12, 79, 0.2); 
            background-color: #ffffff;
        }
        
        /* Bouton Soumettre Pro */
        #testimonialForm button[type="submit"] { 
            width: 100%;
            padding: 18px 35px; 
            background: linear-gradient(135deg, #FF69B4, var(--rose-fonce)); 
            font-size: 1.4em; 
            color: white; 
            border-radius: 10px; 
            font-weight: 900; 
            box-shadow: 0 10px 25px rgba(138, 12, 79, 0.7); 
            letter-spacing: 2px;
            text-transform: uppercase;
        }
        #testimonialForm button[type="submit"]:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 15px 35px rgba(138, 12, 79, 0.9); 
            background: linear-gradient(135deg, var(--rose-fonce), #FF69B4);
        }
        
        /* --- BOUTON "VOIR LE LIVRE" --- */
        .book-button {
            background-color: var(--rose-fonce);
            background-image: linear-gradient(45deg, var(--rose-fonce) 40%, #c92c7c 100%);
            
            @apply inline-flex items-center justify-center 
                   px-12 py-5 mt-16 mb-24 
                   text-2xl font-extrabold text-white
                   rounded-full 
                   transition-all duration-400 ease-out; 

            box-shadow: 0 15px 40px rgba(138, 12, 79, 0.6); 
            letter-spacing: 2px;
            text-transform: uppercase;
        }

        .book-button:hover { 
            transform: scale(1.05) translateY(-3px); 
            box-shadow: 0 20px 50px rgba(138, 12, 79, 0.8); 
        }

        /* MODAL STYLES (CONFIRMATION) */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0, 0, 0, 0.6);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        .modal-overlay.open { display: flex; }
        .modal-content {
            background: #ffffff;
            padding: 40px;
            border-radius: 15px;
            width: 90%;
            max-width: 450px;
            text-align: center;
            box-shadow: 0 15px 50px rgba(0, 0, 0, 0.4);
            animation: modalIn 0.3s ease-out;
        }
        @keyframes modalIn {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }
        .modal-button-link {
            display: block;
            margin-top: 20px;
            padding: 12px 25px;
            background: linear-gradient(135deg, var(--rose-fonce), var(--secondary-pink));
            color: white;
            font-weight: bold;
            border-radius: 50px;
            transition: all 0.3s;
            text-decoration: none;
        }
        .modal-button-link:hover { transform: scale(1.03); box-shadow: 0 5px 15px rgba(138, 12, 79, 0.5); }
    </style>
</head>

<body>
    <audio id="backgroundMusic" loop muted>
        <source src="happy_bday_jingle.mp3" type="audio/mp3">
    </audio>

    <main class="flex-grow">
        
        <section class="hero">
            <div class="carousel" id="heroCarousel">
                <div class="carousel-item"><img src="photo1.JPG" alt="Ruth Mulimbi - Photo 1" class="hero-img"></div>
                <div class="carousel-item"><img src="photo2.jpg" alt="Ruth Mulimbi - Photo 2" class="hero-img"></div>
                <div class="carousel-item"><img src="photo3.JPG" alt="Ruth Mulimbi - Photo 3" class="hero-img"></div>
                <div class="carousel-item"><img src="photo4.JPG" alt="Ruth Mulimbi - Photo 4" class="hero-img"></div>
                <div class="carousel-item"><img src="photo5.JPG" alt="Ruth Mulimbi - Photo 5" class="hero-img"></div>
                <div class="carousel-item"><img src="photo6.JPG" alt="Ruth Mulimbi - Photo 6" class="hero-img"></div>
                <div class="carousel-item"><img src="photo7.JPG" alt="Ruth Mulimbi - Photo 7" class="hero-img"></div>
                <div class="carousel-item"><img src="photo8.JPG" alt="Ruth Mulimbi - Photo 8" class="hero-img"></div>
                <div class="carousel-item" id="firstClone"><img src="photo1.JPG" alt="Ruth Mulimbi - Photo 1" class="hero-img"></div>
            </div>
            
            <div class="hero-text">
                <h1>👸🏽 Joyeux Anniversaire</h1>
                <p>« À notre Reine, Ruth Mulimbi. Brille, car tu es un cadeau ! »</p>
            </div>
        </section>

        <h1 class="text-5xl lg:text-6xl text-center mt-20 mb-3 text-primary-wine font-display font-extrabold tracking-widest leading-tight">
            <span class="text-6xl mr-2">💖</span> LE CADEAU DES MOTS
        </h1>
        <p class="text-xl max-w-2xl mx-auto font-serif text-gray-700 leading-relaxed mb-12">
            Écris un mot doux, un souvenir précieux ou une bénédiction pour elle en ce jour spécial. 
            <span class="font-bold text-primary-wine block mt-1">**Ton message sera une surprise totale !**</span>
        </p>

        <div class="w-24 h-1 mx-auto mb-16 rounded-full bg-secondary-pink/50"></div>
        <form id="testimonialForm">
            <label for="name">Votre prénom et Nom :</label>
            <input type="text" id="name" placeholder="Ex : Kelitha Cigoha" required aria-label="Votre prénom et nom" />
            
            <label for="message">Votre message :</label>
            <textarea id="message" rows="6" placeholder="Ex : Joyeux anniversaire Ruth ! Ta présence est une bénédiction. Je prie que cette année t'apporte bonheur et succès. 💖" required aria-label="Votre message"></textarea>
            
            <div id="errorMessage" class="text-red-600 text-lg mb-4 text-center font-bold" role="alert" style="display: none;"></div>

            <button type="submit">✨ Ajouter au livre</button>
        </form>

        <div>
            <a href="livre.html" class="book-button">
                <svg class="w-8 h-8 mr-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.5l8 4.5v8l-8 4.5-8-4.5v-8l8-4.5zM12 6.5v11.5M4 11l8 4.5 8-4.5M4 11v8M20 11v8"></path></svg>
                Voir le livre de messages
            </a>
        </div>
        
        <h2 class="text-4xl font-display text-primary-wine mt-24 mb-6 font-bold">Besoin d'aide ?</h2>
        
        <div class="max-w-xl mx-auto bg-white p-8 rounded-3xl shadow-2xl border-2 border-secondary-pink/30 mb-20">
            
            <h3 class="text-2xl font-display font-semibold text-gray-800 mb-6 border-b pb-3">Contact & Commandes</h3>
            
            <div class="flex items-center justify-start mb-6 text-xl">
                <svg class="w-8 h-8 mr-4 text-green-500 flex-shrink-0" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 15.5h2v-7h-2v7zm0-8.5h2V6.5h-2v2z"/></svg>
                <p>
                    <span class="font-bold text-primary-wine">WhatsApp :</span> 
                    <a href="https://wa.me/243997227819" target="_blank" rel="noopener noreferrer" class="font-bold text-green-600 hover:text-green-800 transition-colors ml-1">+243 99 72 27 819</a>
                </p>
            </div>
            
            <div class="flex items-center justify-start text-xl">
                <svg class="w-8 h-8 mr-4 text-primary-wine flex-shrink-0" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 17.93c-3.95-.49-7-3.47-7-7.43 0-2.83 1.43-5.41 3.75-6.91v.96l-1.93 1.93c-.4-.4-.73-.83-.98-1.28l.98-.98h1.25V5.5c2.47-1.39 5.53-1.39 8 0v2.5h-1.25l-1.93-1.93.98-.98c-.25.45-.58.88-.98 1.28l-1.93-1.93v-.96c2.32 1.5 3.75 4.08 3.75 6.91 0 3.96-3.05 6.94-7 7.43z"/></svg>
                <p>
                    <span class="font-bold text-primary-wine">Site web :</span> 
                    <a href="https://the-gift-of-words.rf.gd/?i=1" target="_blank" rel="noopener noreferrer" class="font-bold text-primary-wine hover:text-secondary-pink transition-colors ml-1">the-gift-of-words.rf.gd</a>
                </p>
            </div>
        </div>
        </main>

    <footer> 
        <span class="signature">Gabby Umba</span>
        <span class="text-gray-500"> | © 2025</span>
    </footer>

    <div id="successModal" class="modal-overlay">
        <div class="modal-content">
            <svg class="mx-auto w-20 h-20 text-primary-wine" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
            <h2 class="text-3xl font-display text-gray-800 mt-4 mb-3 font-bold">Message reçu ! 💌</h2>
            <p class="text-gray-600 font-serif">Votre mot doux est désormais enregistré. Cliquez ci-dessous pour voir tous les témoignages.</p>
            
            <a href="livre.html" class="modal-button-link">
                Voir le Livre d'Or
            </a>

            <button onclick="closeModal('successModal')" class="mt-4 text-sm text-gray-500 hover:text-gray-800 transition duration-150 font-semibold">
                Continuer à écrire
            </button>
        </div>
    </div>


    <script>
        // Initialisation Firebase (compatible v9, SANS AUTH)
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'lwangagestion';
        
        const firebaseConfig = typeof __firebase_config !== 'undefined' 
            ? JSON.parse(__firebase_config) 
            : {
                apiKey: "AIzaSyCQdZppl-UsPCXF8iFmXQpcGAFjHEMt838",
                authDomain: "gestion-saint-charles-lwanga.firebaseapp.com",
                projectId: "gestion-saint-charles-lwanga",
                storageBucket: "gestion-saint-charles-lwanga.firebasestorage.app",
                messagingSenderId: "508302363143",
                appId: "1:508302363143:web:35c181528dd84def1a78a2"
            };

        const app = firebase.initializeApp(firebaseConfig);
        const db = firebase.firestore();

        // Références aux éléments du DOM
        const form = document.getElementById('testimonialForm');
        const carousel = document.getElementById('heroCarousel');
        const totalImages = 8; 
        let currentIndex = 0;
        const transitionDuration = 1000; 
        const music = document.getElementById('backgroundMusic');

        // Fonctions Modal
        function openModal(id) {
            document.getElementById(id).classList.add('open');
        }
        function closeModal(id) {
            document.getElementById(id).classList.remove('open');
        }

        // 1. Démarrage de la musique et déblocage au 1er clic
        document.addEventListener('DOMContentLoaded', () => {
             music.play().catch(e => console.log("Autoplay bloqué.")); 
             document.body.addEventListener('click', () => {
                if (music.muted) {
                    music.muted = false;
                    music.volume = 0.4; 
                }
             }, { once: true });
        });


        // 2. LOGIQUE DU CAROUSEL
        function startCarousel() {
            if (!carousel) return;
            const slideWidth = 100 / (totalImages + 1); 
            
            setInterval(() => {
                currentIndex++;
                const offset = -currentIndex * slideWidth; 
                carousel.style.transition = `transform ${transitionDuration / 1000}s cubic-bezier(0.42, 0, 0.58, 1)`; 
                carousel.style.transform = `translateX(${offset}%)`;

                if (currentIndex >= totalImages) {
                    setTimeout(() => {
                        carousel.style.transition = 'none';
                        currentIndex = 0;
                        carousel.style.transform = 'translateX(0)';
                    }, transitionDuration); 
                }
            }, 5000); 
        }
        document.addEventListener('DOMContentLoaded', startCarousel);


        // 3. LOGIQUE DU FORMULAIRE ET CONFETTIS
        form.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const errorMessage = document.getElementById('errorMessage');
            errorMessage.style.display = 'none';
            closeModal('successModal');

            const name = document.getElementById('name').value.trim();
            const message = document.getElementById('message').value.trim();

            if (name.length < 2 || message.length < 5) {
                errorMessage.textContent = "Merci d’écrire un prénom et un message sincère (minimum 5 caractères) 💕";
                errorMessage.style.display = 'block';
                return;
            }

            const collectionPath = `artifacts/${appId}/public/data/testimonials`;

            try {
                // Écriture dans Firestore (Fonctionne sans Auth si règles = if true)
                await db.collection(collectionPath).add({
                    name: name,
                    message: message,
                    timestamp: firebase.firestore.FieldValue.serverTimestamp()
                });

                // Succès : Confettis et Modal Pro
                form.reset();
                confetti({
                    particleCount: 150,
                    spread: 90,
                    origin: { y: 0.6 },
                    colors: ['#8a0c4f', '#e990b0', '#ffffff', '#FF69B4'] 
                });
                openModal('successModal');
                
            } catch (error) {
                console.error("Erreur lors de l'ajout du document: ", error);
                errorMessage.textContent = `❌ Erreur lors de l'envoi. Veuillez vérifier vos règles Firebase. Erreur: ${error.message}.`;
                errorMessage.style.display = 'block';
            }
        });
    </script>
</body>
</html>
